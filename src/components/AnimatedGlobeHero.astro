---
import { Star, Zap, ArrowRight, ArrowDown } from 'lucide-astro';

/**
 * Animated Globe Hero Component
 * Features an animated 3D globe with "FUTURE IS NOW" overlay text
 */

interface Props {
    title?: string;
    subtitle?: string;
    ctaText?: string;
    ctaHref?: string;
}

const { 
    title = 'FUTURE IS NOW',
    subtitle = 'Experience tomorrow\'s technology today with cutting-edge solutions that transform the way we connect with the world.',
    ctaText = 'Explore the Future',
    ctaHref = '/about',
} = Astro.props;
---

<section class="relative min-h-screen flex items-center justify-center overflow-hidden bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900">
    <!-- Animated stars background -->
    <div class="absolute inset-0">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>
    
    <!-- Globe Container -->
    <div class="globe-container absolute inset-0 flex items-center justify-center">
        <!-- Globe -->
        <div class="globe" id="globe">
            <!-- Globe surface with continents -->
            <div class="globe-surface">
                <!-- Continent shapes -->
                <div class="continent continent-1"></div>
                <div class="continent continent-2"></div>
                <div class="continent continent-3"></div>
                <div class="continent continent-4"></div>
                <div class="continent continent-5"></div>
                <div class="continent continent-6"></div>
            </div>
            
            <!-- Globe atmosphere glow -->
            <div class="globe-glow"></div>
            
            <!-- Orbital rings -->
            <div class="orbital-ring ring-1"></div>
            <div class="orbital-ring ring-2"></div>
            <div class="orbital-ring ring-3"></div>
        </div>
    </div>
    
    <!-- Content Overlay -->
    <div class="relative z-20 text-center px-4 max-w-6xl mx-auto">
        <!-- Main Title -->
        <h1 
            class="hero-title text-6xl sm:text-7xl md:text-8xl lg:text-9xl font-black mb-6 leading-none tracking-tighter"
            id="heroTitle"
        >
            <span class="block title-line" data-text="FUTURE">{title.split(' ')[0]}</span>
            <span class="block title-line" data-text="IS">{title.split(' ')[1]}</span>
            <span class="block title-line" data-text="NOW">{title.split(' ')[2]}</span>
        </h1>
        
        <!-- Subtitle -->
        <p 
            class="subtitle text-lg sm:text-xl md:text-2xl text-slate-300 mb-12 max-w-3xl mx-auto leading-relaxed opacity-0"
            id="heroSubtitle"
        >
            {subtitle}
        </p>
        
        <!-- CTA Button -->
        <div class="cta-container opacity-0" id="ctaContainer">
            <a 
                href={ctaHref}
                class="group inline-flex items-center gap-3 px-8 py-4 bg-gradient-to-r from-cyan-500 to-blue-500 text-white rounded-full font-bold text-lg shadow-xl shadow-cyan-500/25 hover:shadow-2xl hover:shadow-cyan-500/40 hover:scale-105 transition-all duration-300"
                id="ctaButton"
            >
                <Zap class="w-5 h-5" />
                <span>{ctaText}</span>
                <ArrowRight class="w-5 h-5 group-hover:translate-x-1 transition-transform duration-300" />
            </a>
        </div>
        
        <!-- Scroll indicator -->
        <div class="absolute bottom-8 left-1/2 -translate-x-1/2 animate-bounce opacity-60">
            <ArrowDown class="w-6 h-6 text-slate-300" />
        </div>
    </div>
    
    <!-- Tech particles -->
    <div class="particles absolute inset-0 pointer-events-none" id="particles"></div>
</section>

<style>
    /* Stars Animation */
    .stars, .stars2, .stars3 {
        position: absolute;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        pointer-events: none;
    }
    
    .stars {
        background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ccircle cx='50' cy='50' r='0.5' fill='white' opacity='0.8'/%3e%3c/svg%3e") repeat;
        background-size: 100px 100px;
        animation: move-stars 120s linear infinite;
    }
    
    .stars2 {
        background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ccircle cx='30' cy='70' r='0.3' fill='white' opacity='0.6'/%3e%3c/svg%3e") repeat;
        background-size: 120px 120px;
        animation: move-stars 80s linear infinite reverse;
    }
    
    .stars3 {
        background: transparent url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'%3e%3ccircle cx='80' cy='20' r='0.2' fill='white' opacity='0.4'/%3e%3c/svg%3e") repeat;
        background-size: 150px 150px;
        animation: move-stars 60s linear infinite;
    }
    
    @keyframes move-stars {
        0% { transform: translate3d(0, 0, 0); }
        100% { transform: translate3d(-100px, -100px, 0); }
    }
    
    /* Globe Styles */
    .globe {
        width: 400px;
        height: 400px;
        position: relative;
        border-radius: 50%;
        background: radial-gradient(circle at 30% 30%, #4ade80, #22c55e, #16a34a, #15803d);
        transform-style: preserve-3d;
        animation: rotate-globe 20s linear infinite;
        box-shadow: 
            inset -50px -50px 100px rgba(0, 0, 0, 0.3),
            0 0 100px rgba(34, 197, 94, 0.3),
            0 0 200px rgba(34, 197, 94, 0.1);
    }
    
    @media (max-width: 768px) {
        .globe {
            width: 300px;
            height: 300px;
        }
    }
    
    .globe-surface {
        position: absolute;
        inset: 0;
        border-radius: 50%;
        overflow: hidden;
    }
    
    .continent {
        position: absolute;
        background: rgba(22, 163, 74, 0.8);
        border-radius: 50%;
    }
    
    .continent-1 {
        width: 60px;
        height: 40px;
        top: 20%;
        left: 15%;
        border-radius: 20px 40px 20px 30px;
    }
    
    .continent-2 {
        width: 80px;
        height: 60px;
        top: 35%;
        right: 10%;
        border-radius: 40px 20px 35px 25px;
    }
    
    .continent-3 {
        width: 50px;
        height: 70px;
        bottom: 15%;
        left: 20%;
        border-radius: 25px 30px 20px 40px;
    }
    
    .continent-4 {
        width: 40px;
        height: 30px;
        top: 10%;
        right: 30%;
        border-radius: 20px 15px 25px 10px;
    }
    
    .continent-5 {
        width: 70px;
        height: 50px;
        bottom: 30%;
        right: 20%;
        border-radius: 35px 25px 30px 20px;
    }
    
    .continent-6 {
        width: 30px;
        height: 40px;
        top: 50%;
        left: 5%;
        border-radius: 15px 20px 15px 25px;
    }
    
    .globe-glow {
        position: absolute;
        inset: -20px;
        border-radius: 50%;
        background: radial-gradient(circle, transparent 40%, rgba(34, 197, 94, 0.1) 70%);
        animation: pulse-glow 3s ease-in-out infinite alternate;
    }
    
    @keyframes rotate-globe {
        0% { transform: rotateY(0deg) rotateX(-10deg); }
        100% { transform: rotateY(360deg) rotateX(-10deg); }
    }
    
    @keyframes pulse-glow {
        0% { opacity: 0.5; transform: scale(1); }
        100% { opacity: 1; transform: scale(1.05); }
    }
    
    /* Orbital Rings */
    .orbital-ring {
        position: absolute;
        border: 1px solid rgba(56, 189, 248, 0.3);
        border-radius: 50%;
        transform-style: preserve-3d;
    }
    
    .ring-1 {
        width: 500px;
        height: 500px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(80deg);
        animation: orbit-ring 15s linear infinite;
    }
    
    .ring-2 {
        width: 600px;
        height: 600px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(70deg) rotateY(45deg);
        animation: orbit-ring 25s linear infinite reverse;
    }
    
    .ring-3 {
        width: 550px;
        height: 550px;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%) rotateX(60deg) rotateZ(30deg);
        animation: orbit-ring 20s linear infinite;
    }
    
    @keyframes orbit-ring {
        0% { transform: translate(-50%, -50%) rotateX(80deg) rotateZ(0deg); }
        100% { transform: translate(-50%, -50%) rotateX(80deg) rotateZ(360deg); }
    }
    
    /* Title Styles */
    .hero-title {
        background: linear-gradient(135deg, #ffffff, #e2e8f0, #cbd5e1);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        text-shadow: 0 0 50px rgba(255, 255, 255, 0.3);
        position: relative;
    }
    
    .title-line {
        display: inline-block;
        position: relative;
    }
    
    .title-line::before {
        content: attr(data-text);
        position: absolute;
        top: 0;
        left: 0;
        background: linear-gradient(135deg, #06b6d4, #0891b2, #0e7490);
        background-clip: text;
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        z-index: -1;
        filter: blur(2px);
    }
    
    /* Responsive adjustments */
    @media (max-width: 1024px) {
        .ring-1, .ring-2, .ring-3 {
            width: 400px;
            height: 400px;
        }
    }
    
    @media (max-width: 768px) {
        .ring-1, .ring-2, .ring-3 {
            width: 300px;
            height: 300px;
        }
        
        .hero-title {
            font-size: 3rem;
        }
    }
</style>

<script>
    import { gsap } from 'gsap';
    
    // Wait for DOM to load
    document.addEventListener('DOMContentLoaded', () => {
        // Create timeline for sequential animations
        const tl = gsap.timeline();
        
        // Animate title lines one by one
        tl.from('.title-line', {
            duration: 1,
            y: 100,
            opacity: 0,
            stagger: 0.3,
            ease: 'power3.out'
        })
        .from('#heroSubtitle', {
            duration: 0.8,
            y: 30,
            opacity: 0,
            ease: 'power2.out'
        }, '-=0.3')
        .from('#ctaContainer', {
            duration: 0.6,
            y: 20,
            opacity: 0,
            ease: 'power2.out'
        }, '-=0.2');
        
        // Animate globe entrance
        gsap.from('#globe', {
            duration: 2,
            scale: 0.3,
            opacity: 0,
            ease: 'elastic.out(1, 0.3)',
            delay: 0.5
        });
        
        // Create floating particles
        function createParticles() {
            const particlesContainer = document.getElementById('particles');
            if (!particlesContainer) return;
            
            for (let i = 0; i < 50; i++) {
                const particle = document.createElement('div');
                particle.className = 'particle';
                particle.style.cssText = `
                    position: absolute;
                    width: 2px;
                    height: 2px;
                    background: rgba(56, 189, 248, 0.6);
                    border-radius: 50%;
                    pointer-events: none;
                `;
                
                // Random starting position
                const x = Math.random() * window.innerWidth;
                const y = Math.random() * window.innerHeight;
                
                gsap.set(particle, { x, y, opacity: 0 });
                particlesContainer.appendChild(particle);
                
                // Animate particle
                gsap.to(particle, {
                    duration: Math.random() * 3 + 2,
                    y: y - Math.random() * 200 - 100,
                    x: x + (Math.random() - 0.5) * 100,
                    opacity: 1,
                    repeat: -1,
                    yoyo: true,
                    ease: 'sine.inOut',
                    delay: Math.random() * 2
                });
            }
        }
        
        createParticles();
        
        // CTA button hover effect
        const ctaButton = document.getElementById('ctaButton');
        if (ctaButton) {
            ctaButton.addEventListener('mouseenter', () => {
                gsap.to(ctaButton, {
                    duration: 0.3,
                    scale: 1.05,
                    boxShadow: '0 25px 50px -12px rgba(56, 189, 248, 0.4)',
                    ease: 'power2.out'
                });
            });
            
            ctaButton.addEventListener('mouseleave', () => {
                gsap.to(ctaButton, {
                    duration: 0.3,
                    scale: 1,
                    boxShadow: '0 25px 50px -12px rgba(56, 189, 248, 0.25)',
                    ease: 'power2.out'
                });
            });
        }
        
        // Parallax effect on mouse move
        document.addEventListener('mousemove', (e) => {
            const { clientX, clientY } = e;
            const centerX = window.innerWidth / 2;
            const centerY = window.innerHeight / 2;
            
            const moveX = (clientX - centerX) * 0.01;
            const moveY = (clientY - centerY) * 0.01;
            
            gsap.to('#globe', {
                duration: 1,
                rotationY: moveX,
                rotationX: -moveY,
                ease: 'power1.out'
            });
        });
    });
</script>